show_progress() {
    local step=$1
    local total=$2
    local description="$3"
    local progress=$((step * 100 / total))
    local bar_width=60
    local filled=$((progress * bar_width / 100))
    local empty=$((bar_width - filled))

    # Limpar linha atual
    printf "\r\033[K"

    # CabeÃ§alho da barra
    printf "${BOLD}${WHITE}â•­"
    printf "â”€%.0s" $(seq 1 $((bar_width + 20)))
    printf "â•®${RESET}\n"

    # Linha principal da barra
    printf "${BOLD}${WHITE}â”‚${RESET} "

    # Barra de progresso preenchida (azul brilhante)
    if [ $filled -gt 0 ]; then
        printf "${BOLD}${BLUE}"
        for i in $(seq 1 $filled); do
            if [ $i -eq $filled ] && [ $progress -lt 100 ]; then
                printf "â–¶"  # Seta animada no final
            else
                printf "â–ˆ"
            fi
        done
        printf "${RESET}"
    fi

    # Barra vazia (cinza claro)
    if [ $empty -gt 0 ]; then
        printf "${BOLD}\033[90m"  # Cinza escuro
        printf "â–‘%.0s" $(seq 1 $empty)
        printf "${RESET}"
    fi

    # Porcentagem e status
    printf " ${BOLD}${WHITE}â”‚${RESET} "
    printf "${BOLD}${CYAN}%3d%%${RESET} " "$progress"

    # Indicador de status animado
    case $((step % 4)) in
        0) printf "${YELLOW}â—${RESET}" ;;
        1) printf "${YELLOW}â—${RESET}" ;;
        2) printf "${YELLOW}â—‘${RESET}" ;;
        3) printf "${YELLOW}â—’${RESET}" ;;
    esac

    printf " ${BOLD}${WHITE}â”‚${RESET}\n"

    # RodapÃ© da barra
    printf "${BOLD}${WHITE}â•°"
    printf "â”€%.0s" $(seq 1 $((bar_width + 20)))
    printf "â•¯${RESET}\n"

    # DescriÃ§Ã£o da etapa atual
    printf "${BOLD}${PURPLE}ğŸ”„ ${RESET}${BOLD}Executando:${RESET} ${CYAN}%s${RESET}\n" "$description"
    printf "${BOLD}${WHITE}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”ï¿½ï¿½â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${RESET}\n\n"

    # Mover cursor para cima para sobrescrever na prÃ³xima chamada
    if [ $step -ne $total ]; then
        printf "\033[6A"  # Move 6 linhas para cima
    else
        printf "${BOLD}${GREEN}ğŸ‰ InstalaÃ§Ã£o concluÃ­da com sucesso!${RESET}\n\n"
    fi

    # Pequena pausa para efeito visual
    sleep 0.1
}
