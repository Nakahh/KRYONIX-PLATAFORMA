{
  "name": "prometheus",
  "displayName": "Prometheus Monitoring",
  "description": "Sistema de monitoramento e alertas de s√©ries temporais",
  "version": "2.47.0",
  "category": "monitoring",
  "config": {
    "global": {
      "scrape_interval": "15s",
      "evaluation_interval": "15s",
      "external_labels": {
        "monitor": "kryonix-monitor",
        "replica": "A"
      }
    },
    "alerting": {
      "alertmanagers": [
        {
          "static_configs": [
            {
              "targets": ["alertmanager:9093"]
            }
          ]
        }
      ]
    },
    "scrape_configs": [
      {
        "job_name": "prometheus",
        "static_configs": [
          {
            "targets": ["localhost:9090"]
          }
        ]
      },
      {
        "job_name": "kryonix-app",
        "static_configs": [
          {
            "targets": ["kryonix-app:3000"]
          }
        ],
        "metrics_path": "/metrics"
      },
      {
        "job_name": "evolution-api",
        "static_configs": [
          {
            "targets": ["evolution-api:8080"]
          }
        ],
        "metrics_path": "/metrics"
      },
      {
        "job_name": "n8n",
        "static_configs": [
          {
            "targets": ["n8n:5678"]
          }
        ],
        "metrics_path": "/metrics"
      },
      {
        "job_name": "mautic",
        "static_configs": [
          {
            "targets": ["mautic:80"]
          }
        ]
      },
      {
        "job_name": "postgres",
        "static_configs": [
          {
            "targets": ["postgres-exporter:9187"]
          }
        ]
      },
      {
        "job_name": "redis",
        "static_configs": [
          {
            "targets": ["redis-exporter:9121"]
          }
        ]
      },
      {
        "job_name": "node-exporter",
        "static_configs": [
          {
            "targets": ["node-exporter:9100"]
          }
        ]
      }
    ]
  },
  "environment_variables": ["DOMAIN"],
  "docker_compose": {
    "image": "prom/prometheus:v2.47.0",
    "ports": ["9090:9090"],
    "volumes": [
      "prometheus_data:/prometheus",
      "./prometheus/prometheus.yml:/etc/prometheus/prometheus.yml",
      "./prometheus/rules:/etc/prometheus/rules"
    ],
    "command": [
      "--config.file=/etc/prometheus/prometheus.yml",
      "--storage.tsdb.path=/prometheus",
      "--web.console.libraries=/etc/prometheus/console_libraries",
      "--web.console.templates=/etc/prometheus/consoles",
      "--storage.tsdb.retention.time=30d",
      "--web.enable-lifecycle"
    ]
  },
  "health_check": {
    "url": "/-/healthy",
    "method": "GET",
    "expected_status": 200,
    "interval": 30
  }
}
